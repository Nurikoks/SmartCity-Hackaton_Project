# bot/rag_client.py

def get_recommendations(query: str, lat: float | None = None, lon: float | None = None) -> str:
    """
    –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è RAG.
    –ü–æ—Ç–æ–º DBL-2 –∑–∞–º–µ–Ω–∏—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–∞ –Ω–∞—Å—Ç–æ—è—â–∏–π –ø–æ–∏—Å–∫ –ø–æ CSV + LLM.
    –í–∞–∂–Ω–æ: –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ return) –ª—É—á—à–µ –Ω–µ –º–µ–Ω—è—Ç—å.
    """
    location_part = ""
    if lat is not None and lon is not None:
        location_part = f"\n\n(–≥–µ–æ–ª–æ–∫–∞—Ü–∏—è: lat={lat:.4f}, lon={lon:.4f})"

    # –ü–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç
    return (
        f"–Ø –ø–æ–ª—É—á–∏–ª —Ç–≤–æ–π –∑–∞–ø—Ä–æ—Å: \"{query}\".{location_part}\n\n"
        "–ü–æ–∫–∞ —á—Ç–æ —ç—Ç–æ –∑–∞–≥–ª—É—à–∫–∞. –ó–¥–µ—Å—å –±—É–¥—É—Ç —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ POI üåÜ"
    )
